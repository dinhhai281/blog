<!DOCTYPE html><html lang="vi"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.61 'Montserrat',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Montserrat',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.618rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.33471rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.21225rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.90825rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.86558rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}ul{margin-left:1.61rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.61rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;font-size:0.85rem;line-height:1.61rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;font-size:1rem;line-height:1.61rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}blockquote{margin-left:1.61rem;margin-right:1.61rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.61rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.61rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}li > ul{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.61rem / 2);}code{font-size:0.85rem;line-height:1.61rem;}kbd{font-size:0.85rem;line-height:1.61rem;}samp{font-size:0.85rem;line-height:1.61rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.07333rem;padding-right:1.07333rem;padding-top:0.805rem;padding-bottom:calc(0.805rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style data-href="/blog/styles.e02a584959a879275a13.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{--bg-opacity:1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}h4{font-size:1.5rem;--text-opacity:1;color:#b83280;color:rgba(184,50,128,var(--text-opacity));font-weight:500;margin-bottom:1rem}ul>li{list-style:disc;margin:1rem 2rem}code.language-text{padding-left:.5rem!important;padding-right:.5rem!important}p{margin-bottom:1rem}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.rounded-full{border-radius:9999px}.cursor-pointer{cursor:pointer}.flex{display:flex}.grid{display:grid}.items-center{align-items:center}.justify-between{justify-content:space-between}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-10{height:2.5rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-10{line-height:2.5rem}.m-0{margin:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-6{margin-top:1.5rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mb-12{margin-bottom:3rem}.p-0{padding:0}.px-8{padding-left:2rem;padding-right:2rem}.pr-2{padding-right:.5rem}.pl-2{padding-left:.5rem}.pt-3{padding-top:.75rem}.pt-6{padding-top:1.5rem}.pb-24{padding-bottom:6rem}.text-pink-700{--text-opacity:1;color:#b83280;color:rgba(184,50,128,var(--text-opacity))}.text-opacity-75{--text-opacity:0.75}.underline{text-decoration:underline}.w-10{width:2.5rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}@media (min-width:768px){.md\:h-12{height:3rem}.md\:text-sm{font-size:.875rem}.md\:text-2xl{font-size:1.5rem}.md\:text-3xl{font-size:1.875rem}.md\:text-4xl{font-size:2.25rem}.md\:mb-10{margin-bottom:2.5rem}.md\:px-16{padding-left:4rem;padding-right:4rem}.md\:pt-10{padding-top:2.5rem}.md\:w-12{width:3rem}}@media (min-width:1024px){.lg\:text-4xl{font-size:2.25rem}.lg\:text-5xl{font-size:3rem}.lg\:mb-12{margin-bottom:3rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pt-12{padding-top:3rem}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.23.10"/><title data-react-helmet="true">Cách blog này được tạo ra với GatsbyJS + Typescript + TailwindCSS | Góc Sáng</title><meta data-react-helmet="true" name="description" content="Personal blog by Hai Nguyen"/><meta data-react-helmet="true" name="keywords" content="Blog,React,Angular,Javascript,Typescript,Functional Programming"/><meta data-react-helmet="true" property="og:title" content="Cách blog này được tạo ra với GatsbyJS + Typescript + TailwindCSS"/><meta data-react-helmet="true" property="og:type" content="website"/><link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/blog/webpack-runtime-c5379ad05c8d9920afa2.js"/><link as="script" rel="preload" href="/blog/framework-d9cf0f47b747b267fae2.js"/><link as="script" rel="preload" href="/blog/styles-1211262dd08146354a2f.js"/><link as="script" rel="preload" href="/blog/app-f7307a6ac13ec036d92e.js"/><link as="script" rel="preload" href="/blog/022d3153bf09c36cd784dcdb36ffbd187f9c96d7-757550509e18b3a93439.js"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-tsx-da91de74ceb71c240a8a.js"/><link as="fetch" rel="preload" href="/blog/page-data/en/setup-gatsby-with-typescript-tailwind-unit-test/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="container pt-6 md:pt-10 lg:pt-12 px-8 md:px-16 lg:px-32 mx-auto"><header class="flex justify-between items-center mb-6 md:mb-10 lg:mb-12"><h1 class="text-pink-700 text-3xl md:text-4xl lg:text-5xl font-bold leading-10"><a role="link" href="/blog/en/">Góc Sáng</a></h1></header><main role="main"><div class="pb-24"><header><h1 data-testid="title" class="mb-12 text-2xl md:text-3xl lg:text-4xl text-pink-700 font-semibold">Cách blog này được tạo ra với GatsbyJS + Typescript + TailwindCSS</h1><div class="mb-8 mx-1 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:50%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABk0lEQVQoz4WSWUsCURTH7+cRe7H6FgW99Vg+qB8gKZC+QyCpzWSPTZDRoo6holFTLuSCBXcWddToIbRFp9Rkto5aZgh2uNyXs/3O/xxknSUsph3bHBkks7eRUjLASy8dXdc1TZ9iiqLeMTVkmydXDNseezgfrzDHuMY2pmdqA98D17g+ZZF5xu1Y2E/RQiLAFy6riqyOB2kDG8vs/9JrJ0Xz6ZCArCaC9uYy0fKNn3t/68qy8lhu9D5lTddkWZ7srALwVRU6wYCI3Ijm4yJzgqu4Dj4meO9Y9vr3UsWSkEgkWcxijBmGEUWx0+lCQI2tw3T5iwqxHkXp82LCz0OxIXAyjLfWjmKHeZbFFEURBOHz+UiSdDqdLan50ewBYDZSDu5mLSYCpWkhGfxWGAyAq/xTt93Tf7CHM0tSC6oXANjPpUKCY5EyG13o5owD6UZijP7B+7U+MAZgNhcTPfbIqsEFa0KwLlX5sxlN1SZ303pug0iZSDlAZuAo4DTgQBDo/u9JQDno0Qemhc2lA7PRDW0h+QvlXv0t+rVJBwAAAABJRU5ErkJggg==" alt="featured-img" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/blog/static/35e7cf2fa052510072e95a9d133e49a4/5ca18/gatsby-featured.png 270w,
/blog/static/35e7cf2fa052510072e95a9d133e49a4/13528/gatsby-featured.png 540w,
/blog/static/35e7cf2fa052510072e95a9d133e49a4/05d05/gatsby-featured.png 1080w,
/blog/static/35e7cf2fa052510072e95a9d133e49a4/0dadc/gatsby-featured.png 1500w" sizes="(max-width: 1080px) 100vw, 1080px" /><img loading="lazy" sizes="(max-width: 1080px) 100vw, 1080px" srcset="/blog/static/35e7cf2fa052510072e95a9d133e49a4/5ca18/gatsby-featured.png 270w,
/blog/static/35e7cf2fa052510072e95a9d133e49a4/13528/gatsby-featured.png 540w,
/blog/static/35e7cf2fa052510072e95a9d133e49a4/05d05/gatsby-featured.png 1080w,
/blog/static/35e7cf2fa052510072e95a9d133e49a4/0dadc/gatsby-featured.png 1500w" src="/blog/static/35e7cf2fa052510072e95a9d133e49a4/05d05/gatsby-featured.png" alt="featured-img" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></header><div data-testid="post-content"><p><em>GatsbyJS</em> là một framework dựa trên ReactJS vàn GraphQL, phù hợp để xây dựng những ứng dụng web một cách nhanh cùng với hiệu năng vượt trội. Bài viết này sẽ nói về cách mình setup một project <code class="language-text">GatsbyJS</code>. Cụ thể là một template <code class="language-text">GatsbyJS</code> sử dụng <code class="language-text">Typescript</code>, <code class="language-text">TailwindCSS (PostCSS)</code> và <code class="language-text">Unit Testing</code>.</p>
<h4>Cài đặt những thứ cần thiết</h4>
<p>Trước khi bắt đầu bạn cần cài đặt</p>
<ul>
<li>Node.js</li>
<li>Git</li>
<li>Gatsby CLI</li>
</ul>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -g gatsby-cli</code></pre></div>
<h4>Dùng Gatsby CLI để tạo 1 project GatsbyJS</h4>
<p>Với Gatsby CLI, chỉ cần một câu lệnh là công việc này sẽ hoàn thành.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">gatsby new gatsby-typescript-tailwindcss https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>
<p>Với câu lệnh trên, bạn sẽ tạo ra một thư mục <code class="language-text">gatsby-typescript-tailwindcss</code> với <code class="language-text">gatsby-starter-hello-world</code> template. Gatsby có rất nhiều template được cộng đồng xây dựng bạn có thể tìm kiếm ở <a href="https://www.gatsbyjs.org/starters/?v=2">đây</a>.</p>
<p>Mình cũng có tạo 1 template là thành quả của bài viết này nếu muốn dùng mà không muốn đọc hết thì tìm trong github của mình nhé 😘.</p>
<p>Quay lại, sử dụng <code class="language-text">gatsby-starter-hello-world</code> bạn sẽ có một project gatsby không có bất kỳ plugin nào. Vì mục đích là để làm blog nên sau này chỉ thêm những plugin cần thiết cho việc đó thôi. Trên trang chủ của GatsbyJS bạn cũng có thể tìm được một cái template starter dùng cho viết blog đó 😋.</p>
<h4>Setup Typescript</h4>
<p>GatsbyJS hiện tại có hỗ trợ phần nào cho Typescript, chỉ cần đổi extension của file từ <code class="language-text">.js</code> sang <code class="language-text">.tsx</code> là được. Tuy nhiên với những file như <code class="language-text">gatsby-config.js</code>, <code class="language-text">gatsby-brower.js</code>, <code class="language-text">gatsby-node.js</code> thì không dùng Typescirpt được nhé.</p>
<p>Nhớ tạo file <code class="language-text">tsconfig.json nhé</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"CommonJS"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ESNext"</span><span class="token punctuation">,</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"DOM"</span><span class="token punctuation">,</span> <span class="token string">"ESNext"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"preserve"</span><span class="token punctuation">,</span>
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noUnusedLocals"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
    <span class="token string">"public"</span><span class="token punctuation">,</span>
    <span class="token string">".cache"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Mình thì có dùng Alias Import của Typescript nên cần phải cài thêm <code class="language-text">tsconfig-paths-webpack-plugin</code></p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -D tsconfig-paths-webpack-plugin</code></pre></div>
<p>Sau đó, thêm vào update lại file gatsby-node.js</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> TsConfigPathsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tsconfig-paths-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">onCreateWebpackConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> actions <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  actions<span class="token punctuation">.</span><span class="token function">setWebpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TsConfigPathsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Bây giờ update lại file <code class="language-text">tsconfig.json</code> để thêm alias, trong trường hợp của mình thì thêm 2 cái này</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"CommonJS"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"ESNext"</span><span class="token punctuation">,</span>
    <span class="token property">"lib"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"DOM"</span><span class="token punctuation">,</span> <span class="token string">"ESNext"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"preserve"</span><span class="token punctuation">,</span>
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"strict"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noEmit"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"noUnusedLocals"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// Thêm @components/* và @utils/*</span>
    <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"src"</span><span class="token punctuation">,</span>
    <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"@utils/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./utils/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"@components/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"./components/*"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"exclude"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
    <span class="token string">"public"</span><span class="token punctuation">,</span>
    <span class="token string">".cache"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Sau khi thêm xong thì thay vì</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'../../../components/layout.tsx'</span><span class="token punctuation">;</span></code></pre></div>
<p>thì ở bất cứ thư mục nào chỉ cần</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">'@components/layout.tsx'</span><span class="token punctuation">;</span></code></pre></div>
<br>
<h4>Setup TailwindCSS</h4>
<p><code class="language-text">TailwindCSS</code> là một CSS framework mà mình khá thích và dạo gần đây cũng thích style Atomic CSS. Nếu bạn không thích thì có thể dùng <code class="language-text">styled-component</code>/<code class="language-text">emotion</code> hay SASS tuỳ thích nhé.</p>
<p>Để setup <code class="language-text">TailwindCSS</code> thì đầu tiên bạn phải cài PostCSS. Gatsby có sẵn <code class="language-text">gatsby-plugin-postcss</code> luôn.</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i tailwindcss gatsby-plugin-postcss cssnano autoprefixer postcss-import</code></pre></div>
<p>Giải thích một chút về những thứ bạn vừa cài:</p>
<ul>
<li><code class="language-text">cssnano</code> là một plugin của <code class="language-text">postcss</code> dùng để minified css giúp cho bundle size của bạn nhỏ hơn, đối với việc build ra static file như GatsbyJS thì bundle càng nhỏ càng tốt đúng không 😉</li>
<li><code class="language-text">autoprefixer</code> là một plugin của <code class="language-text">postcss</code> sẽ tự động thêm các prefix để code css của bạn chạy được trên các browser khác nhau.</li>
<li><code class="language-text">postcss-import</code> là một plugin của <code class="language-text">postcss</code> hỗ trợ syntax <code class="language-text">@import</code>.</li>
<li><code class="language-text">tailwindcss</code> nhân vật chính, thật ra nó cũng là 1 plugin của <code class="language-text">postcss</code> 😬.</li>
</ul>
<p>Đầu tiên thêm mở file <code class="language-text">gatsby-config.js</code> lên thêm plugin postcss vô.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'gatsby-plugin-postcss'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Bây giờ tạo file <code class="language-text">tailwind.config.js</code> với nội dung như sau:</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  purge<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./src/**/*.tsx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  theme<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  variants<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Cơ bản thế này là đủ. Tuy nhiên để biết cụ thể bạn có thể làm gì trong file config này thì nên đọc document của TailwindCSS nhé. Ở đây mình có config để dùng <code class="language-text">PurgeCSS</code> trên những file <code class="language-text">.tsx</code>, việc này sẽ loại bỏ những utility class bạn không sử dụng ra khỏi bundle giúp nó nhỏ hơn.</p>
<p>Cuối cùng tạo file <code class="language-text">postcss.config.js</code> nữa là xong cho TailwindCSS</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> tailwindConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./tailwind.config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-import'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tailwindcss'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>tailwindConfig<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-nested'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cssnano'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Về cơ bản là file này để gắn mấy cái plugin của <code class="language-text">PostCSS</code> thôi. Giờ thì bạn đã sẵn sàng để sử dụng TailwindCSS rồi đó. Để bắt đầu thì hãy tạo file <code class="language-text">src/css/style.css</code> với nội dung sau:</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">'tailwindcss/base'</span><span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'tailwindcss/components'</span><span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'tailwindcss/utilities'</span><span class="token punctuation">;</span></span></code></pre></div>
<p>Sau đó trong file <code class="language-text">gatsby-browser.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">'./src/css/style.css'</span><span class="token punctuation">;</span></code></pre></div>
<h4>Setup ESLint</h4>
<p>Hiện tại TSLint đã bị deprecated nên mình sẽ dùng ESLint cho hợp thời nhé. Đầu tiên là cài những package sau:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -D eslint eslint-config-prettier eslint-plugin-prettier eslint-plugin-react @typescript-eslint/eslint-plugin @typescript-eslint/parser prettier</code></pre></div>
<p>Tạo file <code class="language-text">.eslintrc</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"parser"</span><span class="token operator">:</span> <span class="token string">"@typescript-eslint/parser"</span><span class="token punctuation">,</span>
  <span class="token property">"extends"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"eslint:recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:react/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:@typescript-eslint/recommended"</span><span class="token punctuation">,</span>
    <span class="token string">"prettier/@typescript-eslint"</span><span class="token punctuation">,</span>
    <span class="token string">"plugin:prettier/recommended"</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"settings"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"detect"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"env"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"browser"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"node"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"es6"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"@typescript-eslint"</span><span class="token punctuation">,</span>
    <span class="token string">"react"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"parserOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"ecmaFeatures"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"ecmaVersion"</span><span class="token operator">:</span> <span class="token number">2020</span><span class="token punctuation">,</span>
    <span class="token property">"sourceType"</span><span class="token operator">:</span> <span class="token string">"module"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"react/prop-types"</span><span class="token operator">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span>
    <span class="token property">"@typescript-eslint/explicit-function-return-type"</span><span class="token operator">:</span> <span class="token string">"off"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"overrides"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"*.ts"</span><span class="token punctuation">,</span>
        <span class="token string">"*.js"</span><span class="token punctuation">,</span>
        <span class="token string">"*.tsx"</span><span class="token punctuation">,</span>
        <span class="token string">"*.jsx"</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">"rules"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"@typescript-eslint/no-var-requires"</span><span class="token operator">:</span> <span class="token string">"off"</span><span class="token punctuation">,</span>
        <span class="token property">"@typescript-eslint/explicit-module-boundary-types"</span><span class="token operator">:</span> <span class="token string">"off"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span> </code></pre></div>
<p>Tạo file <code class="language-text">.prettierrc</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"arrowParens"</span><span class="token operator">:</span> <span class="token string">"avoid"</span><span class="token punctuation">,</span>
  <span class="token property">"semi"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"singleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"jsxSingleQuote"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"bracketSpacing"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token property">"trailingComma"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
  <span class="token property">"printWidth"</span><span class="token operator">:</span> <span class="token number">120</span><span class="token punctuation">,</span>
  <span class="token property">"endOfLine"</span><span class="token operator">:</span> <span class="token string">"lf"</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Nếu muốn tự dộng fix lint khi save file thì hãy tạo file <code class="language-text">.vscode/settings.json</code></p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"editor.codeActionsOnSave"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"source.fixAll.eslint"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h4>Cuối cùng là Unit Test</h4>
<p>Thật ra để làm blog thì phần này không cần thiết đâu, nhưng mà mục đích của cái template này có thể làm gì cũng được nên mình sẽ thêm phần setup unit test nữa.</p>
<p>Ở đây mình sẽ dùng <code class="language-text">Jest</code> và <code class="language-text">@testing-library/react</code>. Đầu tiên là cài đặt một số thứ:</p>
<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> i -D @babel/preset-typescript @testing-library/react jest @types/jest babel-jest identity-obj-proxy</code></pre></div>
<p>File <code class="language-text">jest-preprocess.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> babelOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'babel-preset-gatsby'</span><span class="token punctuation">,</span> <span class="token string">'@babel/preset-typescript'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'babel-jest'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createTransformer</span><span class="token punctuation">(</span>babelOptions<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>File <code class="language-text">loadershim.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">global<span class="token punctuation">.</span>___loader <span class="token operator">=</span> <span class="token punctuation">{</span>
  enqueue<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>File <code class="language-text">jest.config.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  transform<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'^.+\\.[jt]sx?$'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>/jest-preprocess.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  moduleNameMapper<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'.+\\.(css|styl|less|sass|scss)$'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">identity-obj-proxy</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token string">'.+\\.(jpg|jpeg|png|gif|eot|otf|webp|svg|ttf|woff|woff2|mp4|webm|wav|mp3|m4a|aac|oga)$'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>/__mocks__/file-mock.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token string">'@utils/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/utils/$1'</span><span class="token punctuation">,</span>
    <span class="token string">'@components/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/components/$1'</span><span class="token punctuation">,</span>
    <span class="token string">'@pages/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/pages/$1'</span><span class="token punctuation">,</span>
    <span class="token string">'@templates/(.*)'</span><span class="token operator">:</span> <span class="token string">'&lt;rootDir>/src/templates/$1'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  testPathIgnorePatterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_modules</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\\.cache</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>.*/public</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  transformIgnorePatterns<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_modules/(?!(gatsby)/)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  globals<span class="token operator">:</span> <span class="token punctuation">{</span>
    __PATH_PREFIX__<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    __BASE_PATH__<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  testURL<span class="token operator">:</span> <span class="token string">'http://localhost'</span><span class="token punctuation">,</span>
  moduleDirectories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">,</span> <span class="token string">'__dirname'</span><span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  setupFiles<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;rootDir>/loadershim.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Trong file trên thì mình sẽ dùng package <code class="language-text">identity-obj-proxy</code> để mock các file css, scss... File binary thì <code class="language-text">__mocks__/file-mock.js</code></p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">'test-file-stub'</span><span class="token punctuation">;</span> </code></pre></div>
<p>Mock thêm Gatsby nữa <code class="language-text">__mocks__/gatsby.ts</code></p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> gastby <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">requireActual</span><span class="token punctuation">(</span><span class="token string">'gatsby'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>gastby<span class="token punctuation">,</span>
  graphql<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Link<span class="token operator">:</span> jest
    <span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> activeClassName<span class="token punctuation">,</span> activeStyle<span class="token punctuation">,</span> getProps<span class="token punctuation">,</span> innerRef<span class="token punctuation">,</span> partiallyActive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> replace<span class="token punctuation">,</span> to<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
        React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>rest<span class="token punctuation">,</span> href<span class="token operator">:</span> to <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  StaticQuery<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  useStaticQuery<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h4>Lúc làm thì mò lâu lắm, viết lại có thể sẽ có chút sai sót bữa nào rảnh sẽ test lại cái bài viết này 😵</h4></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/en/setup-gatsby-with-typescript-tailwind-unit-test";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-f7307a6ac13ec036d92e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-0e7509a3429803f7697c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-899a021bd417d30a6d44.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-da91de74ceb71c240a8a.js"]};/*]]>*/</script><script src="/blog/component---src-templates-blog-post-tsx-da91de74ceb71c240a8a.js" async=""></script><script src="/blog/022d3153bf09c36cd784dcdb36ffbd187f9c96d7-757550509e18b3a93439.js" async=""></script><script src="/blog/app-f7307a6ac13ec036d92e.js" async=""></script><script src="/blog/styles-1211262dd08146354a2f.js" async=""></script><script src="/blog/framework-d9cf0f47b747b267fae2.js" async=""></script><script src="/blog/webpack-runtime-c5379ad05c8d9920afa2.js" async=""></script></body></html>