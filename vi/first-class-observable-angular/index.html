<!DOCTYPE html><html lang="vi"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.61 'Montserrat',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Montserrat',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.618rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.33471rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.21225rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.90825rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:'Montserrat',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.86558rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}ul{margin-left:1.61rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.61rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;font-size:0.85rem;line-height:1.61rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;font-size:1rem;line-height:1.61rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}blockquote{margin-left:1.61rem;margin-right:1.61rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.61rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.61rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}li > ul{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.61rem / 2);}code{font-size:0.85rem;line-height:1.61rem;}kbd{font-size:0.85rem;line-height:1.61rem;}samp{font-size:0.85rem;line-height:1.61rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.07333rem;padding-right:1.07333rem;padding-top:0.805rem;padding-bottom:calc(0.805rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style data-href="/blog/styles.4ded7ceae89755a8010a.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}html{--bg-opacity:1;background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}h4{font-size:1.5rem;--text-opacity:1;color:#b83280;color:rgba(184,50,128,var(--text-opacity));font-weight:500;margin-bottom:1rem}ul>li{list-style:disc;margin:1rem 2rem}code.language-text{padding-left:.5rem!important;padding-right:.5rem!important}p{margin-bottom:1rem}.tag{padding:.25rem .5rem;margin-right:.25rem;margin-bottom:.25rem;--bg-opacity:1;background-color:#d6bcfa;background-color:rgba(214,188,250,var(--bg-opacity));border-radius:.375rem;font-size:.75rem;font-weight:500;--ts-background-color:#007acc;--js-background-color:#f7df1e;--css-background-color:#1572b6;--react-background-color:#61dafb;--angular-background-color:#dd0031;--rxjs-background-color:#d81b60;--rust-background-color:#000;--nodejs-background-color:#393;--graphql-background-color:#e10098;--fb-background-color:#5d4f85}.tag-ts{background-color:var(--ts-background-color);color:#fff;color:rgba(255,255,255,var(--text-opacity))}.tag-js,.tag-ts{--text-opacity:1}.tag-js{background-color:var(--js-background-color);color:#000;color:rgba(0,0,0,var(--text-opacity))}.tag-css{background-color:var(--css-background-color);--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.tag-react{background-color:var(--react-background-color);--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.tag-angular{background-color:var(--angular-background-color)}.tag-angular,.tag-rxjs{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.tag-rxjs{background-color:var(--rxjs-background-color)}.tag-rust{background-color:var(--rust-background-color)}.tag-nodejs,.tag-rust{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.tag-nodejs{background-color:var(--nodejs-background-color)}.tag-graphql{background-color:var(--graphql-background-color)}.tag-fp,.tag-graphql{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.tag-fp{background-color:var(--fb-background-color)}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.rounded-full{border-radius:9999px}.cursor-pointer{cursor:pointer}.flex{display:flex}.grid{display:grid}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-between{justify-content:space-between}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-10{height:2.5rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-10{line-height:2.5rem}.m-0{margin:0}.mx-1{margin-left:.25rem;margin-right:.25rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mr-3{margin-right:.75rem}.mt-6{margin-top:1.5rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mb-12{margin-bottom:3rem}.p-0{padding:0}.px-8{padding-left:2rem;padding-right:2rem}.pt-1{padding-top:.25rem}.pr-2{padding-right:.5rem}.pl-2{padding-left:.5rem}.pt-6{padding-top:1.5rem}.pb-24{padding-bottom:6rem}.text-pink-700{--text-opacity:1;color:#b83280;color:rgba(184,50,128,var(--text-opacity))}.text-opacity-75{--text-opacity:0.75}.underline{text-decoration:underline}.w-10{width:2.5rem}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}@media (min-width:640px){.sm\:mb-0{margin-bottom:0}}@media (min-width:768px){.md\:h-12{height:3rem}.md\:text-sm{font-size:.875rem}.md\:text-2xl{font-size:1.5rem}.md\:text-3xl{font-size:1.875rem}.md\:text-4xl{font-size:2.25rem}.md\:mb-10{margin-bottom:2.5rem}.md\:px-16{padding-left:4rem;padding-right:4rem}.md\:pt-10{padding-top:2.5rem}.md\:w-12{width:3rem}}@media (min-width:1024px){.lg\:text-4xl{font-size:2.25rem}.lg\:text-5xl{font-size:3rem}.lg\:mb-12{margin-bottom:3rem}.lg\:px-32{padding-left:8rem;padding-right:8rem}.lg\:pt-12{padding-top:3rem}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.23.10"/><title data-react-helmet="true">Má»™t chÃºt ngáº«u há»©ng vá»›i Angular - First Class Observable Pattern | GÃ³c SÃ¡ng</title><meta data-react-helmet="true" name="description" content="Personal blog by Hai Nguyen"/><meta data-react-helmet="true" name="keywords" content="Blog,React,Angular,Javascript,Typescript,Functional Programming"/><meta data-react-helmet="true" property="og:title" content="Má»™t chÃºt ngáº«u há»©ng vá»›i Angular - First Class Observable Pattern"/><meta data-react-helmet="true" property="og:type" content="website"/><link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/blog/webpack-runtime-d6f6abd63bb113a94911.js"/><link as="script" rel="preload" href="/blog/framework-d9cf0f47b747b267fae2.js"/><link as="script" rel="preload" href="/blog/styles-1211262dd08146354a2f.js"/><link as="script" rel="preload" href="/blog/app-f7307a6ac13ec036d92e.js"/><link as="script" rel="preload" href="/blog/022d3153bf09c36cd784dcdb36ffbd187f9c96d7-56414ee62f29fb42ac66.js"/><link as="script" rel="preload" href="/blog/component---src-templates-blog-post-tsx-da91de74ceb71c240a8a.js"/><link as="fetch" rel="preload" href="/blog/page-data/vi/first-class-observable-angular/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/blog/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="container pt-6 md:pt-10 lg:pt-12 px-8 md:px-16 lg:px-32 mx-auto"><header class="flex justify-between items-center mb-6 md:mb-10 lg:mb-12"><h1 class="text-pink-700 text-3xl md:text-4xl lg:text-5xl font-bold leading-10"><a role="link" href="/blog/vi/">GÃ³c SÃ¡ng</a></h1></header><main role="main"><div class="pb-24"><header><h1 data-testid="title" class="mb-12 text-2xl md:text-3xl lg:text-4xl text-pink-700 font-semibold">Má»™t chÃºt ngáº«u há»©ng vá»›i Angular - First Class Observable Pattern</h1><div class="mb-8 mx-1 gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:30%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABQElEQVQY02NYrtjNyAAEr0V7lU/I9K7bJ9W77pRQdyADFMyU7WBABpnaHYxAzIANwMX/M0zkmKLSfWGj2qz/x8R6/n3nm/X/Gn/PQrhCrXaODK12niztTiYkMeY0zRbGTK0OLiDmQTF5i0yXzSKlyf+nqvbMnSPTIf2Oqzdhh1h3pademxlIHmiQKdB2VyCWAmJxkCFZ2h28QEtAfBMg1gGyGeEGHpbs1r4pOOH/fZ4eJ5hYrH5HVIZWRyHUQEOgJgsgFgZiNyCWB2IVoCHSQFoOItfOBdZ4W7AX7I13gn2zXvL3XnzD3mN5QLzHcYZyz90azS5TkFyRVhc70FUMQAPYgZq5gTQbkJYBYlYgFgFiCZC6Av1JDAyfxfqgAdnE8Ea0b+Ib3r4fVwV6HmyQ7ckDCb9l72FECXA8IFWjiQEAuTx4QioONh0AAAAASUVORK5CYII=" alt="featured-img" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/blog/static/c74ac8947b9e5dc496e8909256ceb548/5ca18/rxjs-featured.png 270w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/13528/rxjs-featured.png 540w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/05d05/rxjs-featured.png 1080w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/ba0d8/rxjs-featured.png 1620w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/85b69/rxjs-featured.png 1838w" sizes="(max-width: 1080px) 100vw, 1080px" /><img loading="lazy" sizes="(max-width: 1080px) 100vw, 1080px" srcset="/blog/static/c74ac8947b9e5dc496e8909256ceb548/5ca18/rxjs-featured.png 270w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/13528/rxjs-featured.png 540w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/05d05/rxjs-featured.png 1080w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/ba0d8/rxjs-featured.png 1620w,
/blog/static/c74ac8947b9e5dc496e8909256ceb548/85b69/rxjs-featured.png 1838w" src="/blog/static/c74ac8947b9e5dc496e8909256ceb548/05d05/rxjs-featured.png" alt="featured-img" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></header><div data-testid="post-content"><p>Reactive eXtensions for JavaScript lÃ  vÅ© khÃ­ tá»‘i thÆ°á»£ng vá»›i báº¥t ká»³ ai code JavaScript Ä‘áº·c biá»‡t lÃ  nhá»¯ng ai Ä‘au khá»• vá»›i Angular nhÆ° mÃ¬nh. Trong nhá»¯ng ngÃ y thÃ¡ng Ä‘Ã³ thÃ¬ mÃ¬nh cÅ©ng tÃ¬m ra má»™t cÃ¡ch Ä‘á»ƒ enjoy Angular Ä‘Ã³ lÃ  dÃ¹ng RxJS cho má»i thá»© biáº¿n báº£n thÃ¢n thÃ nh má»™t Pure Reactive Programmer. BÃ i viáº¿t nÃ y sáº½ viáº¿t vá» cÃ¡ch mÃ¬nh sá»­ dá»¥ng rxjs cho pháº§n lá»›n cÃ¡c trÆ°á»ng há»£p thÆ°á»ng gáº·p pháº£i khi lÃ m viá»‡c vá»›i Angular, cÃ¡i mÃ  mÃ¬nh tá»± gá»i lÃ  <code class="language-text">First Class Observable Pattern</code>.</p>
<p>âš ï¸ <strong>Má»™t sá»‘ thuáº­t ngá»¯ dÃ¹ng trong nÃ y Ä‘á»u khÃ´ng chÃ­nh thá»©c vÃ  cÃ³ thá»ƒ khÃ´ng chÃ­nh xÃ¡c vá» máº·t há»c thuáº­t.</strong></p>
<p>Ã tÆ°á»Ÿng chÃ­nh á»Ÿ Ä‘Ã¢y lÃ  dÃ¹ng <code class="language-text">Observable</code> cho táº¥t cáº£ má»i thá»©. Dá»¯ liá»‡u, event, side effect,... táº¥t cáº£ Ä‘á»u Ä‘Æ°á»£c thá»ƒ hiá»‡n dÆ°á»›i dáº¡ng <code class="language-text">Observable</code>. Má»¥c Ä‘Ã­ch cá»§a viá»‡c nÃ y lÃ  táº¥t cáº£ má»i thá»© Ä‘á»u lÃ  stream thÃ¬ cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c operator cá»§a <code class="language-text">RxJS</code> Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c logic trong code. Äiá»u nÃ y ráº¥t cáº§n thiáº¿t khi cáº§n lÃ m nhá»¯ng thá»© nhÆ° lÃ  input vÃ  má»™t input thÃ¬ giÃ¡ trá»‹ á»Ÿ input khÃ¡c cÅ©ng pháº£i Ä‘á»•i theo vÃ  cÃ³ thá»ƒ trong Ä‘Ã³ cÃ²n vÃ i yáº¿u tá»‘ khÃ¡c áº£nh hÆ°á»Ÿng tá»›i luá»“ng thay Ä‘á»•i Ä‘Ã³.</p>
<h4>Observable - VÅ© khÃ­ tá»‘i thÆ°á»£ng</h4>
<p>VÃ­ dá»¥ báº¡n cÃ³ cÃ³ 2 biáº¿n <code class="language-text">x</code> vÃ  <code class="language-text">y</code> lÃ  <code class="language-text">number</code>. Náº¿u báº¡n muá»‘n <code class="language-text">z</code> = <code class="language-text">x</code> + <code class="language-text">y</code> thÃ¬ báº¡n sáº½ lÃ m nhÆ° tháº¿ nÃ o?</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> z <span class="token operator">=</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span></code></pre></div>
<p>Náº¿u báº¡n lÃ m giá»‘ng nhÆ° Ä‘oáº¡n code trÃªn thÃ¬ cÃ³ thá»ƒ nÃ³i lÃ  báº¡n vá»«a Ä‘Ãºng vá»«a sai. Báº¡n Ä‘Ãºng vÃ¬ táº¡i thá»i Ä‘iá»ƒm phÃ©p gÃ¡n Ä‘Æ°á»£c thá»±c hiá»‡n nhÆ°ng náº¿u sau Ä‘Ã³ báº¡n gÃ¡n <code class="language-text">x = 1</code> thÃ¬ sao? Báº¡n tháº¥y Ä‘Ã³ náº¿u giÃ¡ trá»‹ cá»§a <code class="language-text">x</code> thay Ä‘á»•i thÃ¬ ngay láº­p tá»©c <code class="language-text">z</code> Ä‘Ã£ khÃ´ng cÃ²n báº±ng <code class="language-text">x + y</code>. Báº¡n sáº½ cáº§n pháº£i láº·p láº¡i dÃ²ng code <code class="language-text">let z = x + y</code>.</p>
<p>Äá»ƒ cháº¯c cháº¯n <code class="language-text">z</code> luÃ´n luÃ´n báº±ng <code class="language-text">x + y</code> thÃ¬ hÃ£y tÆ°á»Ÿng tÆ°á»£ng <code class="language-text">x</code> vÃ  <code class="language-text">y</code> lÃ  cÃ¡c stream <code class="language-text">number</code> giÃ¡ trá»‹ cá»§a chÃºng sáº½ thay Ä‘á»•i theo thá»i gian, cÃ²n <code class="language-text">z</code> lÃ  má»™t stream tá»•ng cá»§a <code class="language-text">x</code> vÃ  <code class="language-text">y</code> (giÃ¡ trá»‹ cá»§a z sáº½ lÃ  tá»•ng cá»§a x vÃ  y táº¡i thá»i Ä‘iá»ƒm t). Äiá»u nÃ y cÃ³ nghia lÃ  má»—i khi x hoáº·c y thay Ä‘á»•i giÃ¡ trá»‹ thÃ¬ giÃ¡ trá»‹ cá»§a z sáº½ Ä‘Æ°á»£c tÃ­nh láº¡i.</p>
<p>Hy vá»ng báº¡n hiá»ƒu váº¥n Ä‘á» trÃªn, Ä‘Ã³ lÃ  Ã½ tÆ°á»Ÿng cá»§a <code class="language-text">Reactive Programming</code>. Váº­y Ä‘á»ƒ lÃ m viá»‡c trÃªn thay vÃ¬ biá»ƒu diá»ƒn x vÃ  y lÃ  2 <code class="language-text">number</code> vÃ  gÃ¡n <code class="language-text">z</code> báº±ng <code class="language-text">x + y</code> á»Ÿ má»™t dÃ²ng code nÃ o Ä‘Ã³ thÃ¬ hÃ£y cÃ¢n nháº¯c lÃ m nhÆ° tháº¿ nÃ y.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> x$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BehaviorSubject</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> y$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BehaviorSubject</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> z$ <span class="token operator">=</span> <span class="token function">combineLatest</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x$<span class="token punctuation">,</span> y$<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Náº¿u muá»‘n thay Ä‘á»•i giÃ¡ trá»‹ cá»§a x vÃ  y</span>
x$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
y$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Tá»›i Ä‘Ã¢y cÃ³ thá»ƒ nhiá»u ngÆ°á»i sáº½ nghÄ© ráº±ng viá»‡c trÃªn chá»‰ lÃ  phá»©c táº¡p hoÃ¡ má»i thá»©, tháº­t ra cÅ©ng Ä‘Ãºng nhÆ°ng mÃ  Ä‘Ã´i khi pháº£i cháº¥p nháº­n Ä‘Ã¡nh Ä‘á»•i cÃ¡i nÃ y Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c cÃ¡i khÃ¡c thÃ´i. HÃ£y tÆ°á»Ÿng tÆ°á»£ng <code class="language-text">Observable</code> lÃ  má»™t cÃ¡i há»™p Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ dá»… dÃ ng sáº¯p xáº¿p vÃ  di chuyá»ƒn, náº¿u báº¡n bá» háº¿t táº¥t cáº£ Ä‘á»“ Ä‘áº¡c trong nhÃ  vÃ´ Ä‘Ã³ thÃ¬ má»i thá»© trá»ng nhÃ  báº¡n Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c sáº¯p xáº¿p gá»n gÃ ng, báº¡n sáº½ lÃ m Ä‘Æ°á»£c Ä‘Æ°á»£c nhá»¯ng viá»‡c mÃ  trÆ°á»›c Ä‘Ã³ khÃ´ng thá»ƒ nÃ o lÃ m Ä‘Æ°á»£c cháº³ng háº¡n nhÆ° Ä‘áº·t má»™t cÃ¡i bÃ n phÃ­m náº±m trÃªn má»™t cÃ¢y bÃºt ğŸ¤”. Thay vÃ¬ báº¥t kháº£ thi thÃ¬ bÃ¢y giá» chá»‰ cáº§n bá» má»i thá»© vÃ´ há»™p lÃ  Ä‘Æ°á»£c.</p>
<p>NhÆ°ng mÃ  khÃ³ khÄƒn má»™t cÃ¡i lÃ  bÃ¢y giá» muá»‘n dÃ¹ng cÃ¡i gÃ¬ thÃ¬ trÆ°á»›c háº¿t báº¡n pháº£i láº¥y cÃ¡i há»™p Ä‘á»±ng Ä‘á»“ váº­t Ä‘Ã³ rá»“i má»Ÿ há»™p ra.</p>
<p><em>Tháº­t ra mÃ¬nh cÅ©ng muá»‘n giáº£i thÃ­ch cÃ¡i lÃ½ thuyáº¿t trÃªn báº±ng Functional Programming nhÆ°ng mÃ  tá»± tháº¥y trÃ¬nh chÆ°a Ä‘á»§ Ä‘á»ƒ giáº£i thÃ­ch nÃªn má»›i cÃ³ cÃ¢u chuyá»‡n cÃ¡i há»™p, bÃ n phÃ­m vÃ  cÃ¢y bÃºt á»Ÿ trÃªn</em> ğŸ˜¥</p>
<p>Quay láº¡i vá»›i code thÃ¬ mÃ¬nh muá»‘n bá» táº¥t cáº£ má»i thá»© tá»« data Ä‘áº¿n logic vÃ o trong <code class="language-text">Observable</code> vÃ  dÃ¹ng cÃ¡c operator mÃ  <code class="language-text">rxjs</code> cung cáº¥p Ä‘á»ƒ thao tÃ¡c trÃªn nhá»¯ng <code class="language-text">Observable</code> Ä‘Ã³. Vá»›i sá»‘ lÆ°á»£ng <code class="language-text">operator</code> cá»±c khá»§ng mÃ  <code class="language-text">rxjs</code> cung cáº¥p thÃ¬ Ä‘iá»u nÃ y vÃ´ cÃ¹ng kháº£ thi. VÃ­ dá»¥ trÃªn lÃ  cá»™ng 2 sá»‘ trong tháº¿ giá»›i cá»§a <code class="language-text">Observable</code> Ä‘Ã³.</p>
<h4>Má»™t sá»‘ vÃ­ dá»¥ Ä‘á»ƒ lÃ m quen</h4>
<p><code class="language-text">Reactive Programming</code> hay háº¹p hÆ¡n lÃ  <code class="language-text">rxjs</code> khÃ´ng pháº£i quÃ¡ khÃ³ Ä‘á»ƒ dÃ¹ng, má»i thá»© báº¡n lÃ m Ä‘Æ°á»£c vá»›i cÃ¡ch code thÃ´ng thÆ°á»ng báº¡n Ä‘á»u cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u tÆ°Æ¡ng tá»± vá»›i cÃ¡c operator cá»§a <code class="language-text">rxjs</code>. Pháº§n nÃ y mÃ¬nh sáº½ Ä‘Æ°a ra má»™t sá»‘ vÃ­ dá»¥ Ä‘á»ƒ nhá»¯ng ai má»›i biáº¿t Ä‘áº¿n <code class="language-text">rxjs</code> cÃ³ thá»ƒ lÃ m quen vá»›i cÃ¡ch suy nghÄ© <strong>Everything is stream</strong> nhÃ©.</p>
<p><em>Äá»ƒ dá»… hiá»ƒu thÃ¬ cÃ¡c mÃ¬nh sáº½ dÃ¹ng <code class="language-text">BehaviorSubject</code> Ä‘á»ƒ táº¡o cÃ¡c local stream, trong thá»±c tháº¿ báº¡n cÃ³ thá»ƒ táº¡o ra má»™t <code class="language-text">Observable</code> tá»« báº¥t cá»© thá»© gÃ¬.</em></p>
<p><strong>Filter má»™t máº£ng theo Ä‘iá»u kiá»‡n</strong></p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">type</span> NumberType <span class="token operator">=</span> <span class="token string">'ODD'</span> <span class="token operator">|</span> <span class="token string">'EVEN'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> selectedNumberType$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BehaviorSubject</span><span class="token operator">&lt;</span>NumberType<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">'ODD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> numbers$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BehaviorSubject</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filteredNumbersA$ <span class="token operator">=</span> <span class="token function">combineLatest</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  numbers$<span class="token punctuation">,</span>
  selectedNumberType$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">numberType</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
      value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token punctuation">(</span>numberType <span class="token operator">===</span> <span class="token string">'ODD'</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>numbers<span class="token punctuation">,</span> filterFn<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>filterFn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Náº¿u báº¡n muá»‘n káº¿t quáº£ chá»‰ thay Ä‘á»•i khi loáº¡i sá»‘ Ä‘Æ°á»£c chá»n thay Ä‘á»•i.</span>
<span class="token keyword">const</span> filteredNumbersB$ <span class="token operator">=</span> selectedNumberType$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">numberType</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token operator">=></span>
    value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token punctuation">(</span>numberType <span class="token operator">===</span> <span class="token string">'ODD'</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">withLatestFrom</span><span class="token punctuation">(</span>numbers$<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>filterFn<span class="token punctuation">,</span> numbers<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>filterFn<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [1, 3]</span>
<span class="token comment">// [2, 4]</span>
<span class="token comment">// [2]</span>
<span class="token comment">// [1]</span>
filteredNumbersA$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [1, 3]</span>
<span class="token comment">// [2, 4]</span>
<span class="token comment">// [1]</span>
filteredNumbersB$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>

selectedNumberType$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'EVEN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
numbers$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
selectedNumberType$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'ODD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Trong vÃ­ dá»¥ trÃªn mÃ¬nh Ä‘Ã£ láº¥y ra cÃ¡c sá»‘ cháºµn hoáº·c láº½ tuá»³ theo <code class="language-text">selectedNumberType</code> Ä‘ang lÃ  <code class="language-text">EVEN</code> hay <code class="language-text">ODD</code>. Cá»¥ thá»ƒ lÃ  cÃ¡c giÃ¡ trá»‹ Ä‘Æ°á»£c emit tá»« <code class="language-text">selectedNumberType$</code> sáº½ Ä‘Æ°á»£c map thÃ nh má»™t <code class="language-text">function</code> dÃ¹ng Ä‘á»ƒ láº¥y sá»‘ cháº³n hay láº» Ä‘á»ƒ sá»­ dá»¥ng trong method <code class="language-text">filter</code> cá»§a array. BÃ¢y giá» báº¡n hÃ£y suy nghÄ© cÃ¡ch Ä‘á»ƒ lÃ m Ä‘iá»u tÆ°Æ¡ng tá»± nhÆ° <code class="language-text">filteredNumbersA$</code> (káº¿t quáº£ filter Ä‘Æ°á»£c thay Ä‘á»•i má»—i khi máº£ng number vÃ  Ä‘iá»u kiá»‡n filter thay Ä‘á»•i) vÃ   <code class="language-text">filteredNumbersB$</code> (káº¿t quáº£ filter Ä‘Æ°á»£c thay Ä‘á»•i chá»‰ khi Ä‘iá»u kiá»‡n filter thay Ä‘á»•i) xem cÃ³ Ä‘Æ¡n giáº£n khÃ´ng nhÃ©.</p>
<p>Náº¿u nhÆ° code bÃ¬nh thÆ°á»ng báº¡n lÃ m Ä‘Æ°á»£c káº¿t quáº£ tÆ°Æ¡ng tá»± má»™t cÃ¡ch Ä‘Æ¡n giáº£n trÃªn náº¿u cháº³ng cáº§n quan tÃ¢m pháº£i update láº¡i káº¿t quáº£ náº¿u nhÆ° cÃ¡c biáº¿n sá»‘ cá»§a báº¡n thay Ä‘á»•i. Tuy nhiÃªn khi sá»± thay Ä‘á»•i trá»Ÿ nÃªn cáº§n thiáº¿t báº¡n váº«n sáº½ lÃ m Ä‘Æ°á»£c thÃ´i nhÆ°ng mÃ  ráº¥t cÃ³ thá»ƒ lÃ  nÃ³ sáº½ vÃ´ cÃ¹ng phá»©c táº¡p vÃ  khÃ´ng ai hiá»ƒu ná»•i ngoÃ i báº¡n (mÃ¬nh Ä‘ang nghÄ© tá»›i viá»‡c táº¡o má»™t class vá»›i vÃ i cÃ¡i setter chá»© thiá»‡t báº£n thÃ¢n mÃ¬nh cÅ©ng cháº£ biáº¿t pháº£i code sao cho hay Ä‘á»ƒ lÃ m chuyá»‡n tÆ°Æ¡ng tá»±).</p>
<p><strong>Toogle</strong></p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> buttonClick$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isShow$ <span class="token operator">=</span> buttonClick$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">scan</span><span class="token punctuation">(</span><span class="token parameter">acc</span> <span class="token operator">=></span> <span class="token operator">!</span>acc<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

isShow$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// click -> true</span>
<span class="token comment">// click -> false</span>
<span class="token comment">// click -> true</span>
<span class="token comment">// click -> false</span></code></pre></div>
<p><strong>Autocomplete with a list of items</strong></p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">const</span> <span class="token function-variable function">fetchAnimals</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dog'</span><span class="token punctuation">,</span> <span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'mouse'</span><span class="token punctuation">,</span> <span class="token string">'frog'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">fetchFruits</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">of</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'durian'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'pineapple'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> searchTerm$ <span class="token operator">=</span> <span class="token function">fromEvent</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'change'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> itemType$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token operator">&lt;</span><span class="token string">'ANIMAL'</span> <span class="token operator">|</span> <span class="token string">'FRUIT'</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">makeFilteredItems</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token parameter">term$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">,</span>
  items$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span><span class="token punctuation">,</span></span>
<span class="token punctuation">)</span> <span class="token operator">=></span> items$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token parameter">items</span> <span class="token operator">=></span> term$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">term</span> <span class="token operator">=></span> items<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=></span> item<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>term<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Má»—i khi item type thay Ä‘á»•i thÃ¬ sau 2s sáº½ táº¡o ra array cÃ¡c item </span>
<span class="token comment">// array nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c filter theo giÃ¡ trá»‹ Ä‘Æ°á»£c nháº­p vÃ o input</span>
<span class="token comment">// Náº¿u nháº­p input trÆ°á»›c 2s sáº½ khÃ´ng tÃ­nh</span>
<span class="token comment">// khi Ä‘á»•i type thÃ¬ sáº½ filter láº¡i tá»« Ä‘Ã¢u (input khÃ´ng bá»‹ xoÃ¡ chá»‰ lÃ  khÃ´ng cÃ³ hiá»‡u lá»±c thÃ´i)</span>
<span class="token keyword">const</span> result$ <span class="token operator">=</span> itemType$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
  <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token parameter">itemType</span> <span class="token operator">=></span> <span class="token function">makeFilteredItems</span><span class="token punctuation">(</span>
    searchTerm$<span class="token punctuation">,</span>
    itemType <span class="token operator">===</span> <span class="token string">'ANIMAL'</span> <span class="token operator">?</span> <span class="token function">fetchAnimals</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">fetchFruits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// --*-- ANIMAL --*--</span>
<span class="token comment">// ['dog', 'cat', 'mouse', 'frog']</span>
<span class="token comment">// ['dog', 'mouse', 'frog']</span>
<span class="token comment">// ['dog', 'frog']</span>
<span class="token comment">// ['dog', 'mouse', 'frog']</span>
<span class="token comment">// ['cat']</span>

<span class="token comment">// --*-- FRUIT --*--</span>
<span class="token comment">// ['banana', 'durian', 'apple', 'pineapple'] (t)</span>
<span class="token comment">// ['banana', 'durian', 'apple', 'pineapple'] ( )</span>
<span class="token comment">// ['apple', 'pineapple'] (ap)</span>
<span class="token comment">// ['banana', 'durian', 'apple', 'pineapple'] (a)</span>
<span class="token comment">// ['banana', 'durian', 'apple', 'pineapple'] ( )</span>
<span class="token comment">// ['banana', 'durian', 'apple', 'pineapple'] (a)</span>
<span class="token comment">// ['banana' 'durian'] (an)</span>
result$<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token punctuation">;</span>

itemType$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'ANIMAL'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// input: (sau 2s) o---og---o---t</span>
itemType$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">'FRUIT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// input (Ä‘ang lÃ  t tá»« láº§n nháº­p trÆ°á»›c): sau (2s) -- --ap--a-- --a--an</span></code></pre></div>
<p>TrÃªn Ä‘Ã¢y lÃ  má»™t sá»‘ vÃ­ dá»¥ sá»­ dá»¥ng <code class="language-text">rxjs</code> Ä‘á»ƒ thá»±c hiá»‡n má»™t sá»‘ viá»‡c, vá» cÆ¡ báº£n báº¥t cá»© thá»© gÃ¬ báº¡n cÅ©ng cÃ³ thá»ƒ nhÃ©t nÃ³ vÃ o trong 1 <code class="language-text">Observable</code> vÃ  náº¿u táº¥t cáº£ má»i thá»© Ä‘á»u lÃ  <code class="language-text">Observable</code> thÃ¬ táº¥t cáº£ nhá»¯ng logic, nhá»¯ng tÃ­nh toÃ¡n mÃ  báº¡n thá»±c hiá»‡n háº±ng ngÃ y Ä‘á»u sáº½ lÃ  sá»± káº¿t há»£p cá»§a cÃ¡c observable vÃ  cÃ¡c operator.</p>
<h4>Angular First Class Observable</h4>
<p>Náº¿u nhÆ° báº¡n cÃ³ thá»ƒ thay Ä‘á»•i mindset theo hÆ°á»›ng <code class="language-text">Reactive Programming</code>, biáº¿n Ä‘á»•i táº¥t cáº£ má»i thá»© cÃ³ trong má»™t component thÃ nh dáº¡ng <code class="language-text">Observable</code> thÃ¬ Ä‘Ã³ chÃ­nh lÃ  pattern mÃ  mÃ­nh gá»i lÃ  <code class="language-text">Angular First Class Observable</code>. Nghe cÃ³ váº» mÆ¡ há»“ nÃªn mÃ¬nh sáº½ Ä‘Æ°a ra má»™t sá»‘ nguyÃªn táº¯c sau:</p>
<ul>
<li>Táº¥t cáº£ cÃ¡c property Ä‘á»u pháº£i lÃ  <code class="language-text">Observable</code>.</li>
<li>Sá»­ dá»¥ng <code class="language-text">BehaviorSubject</code> cho cÃ¡c state cá»§a component.</li>
<li>Náº¿u cáº§n handle má»™t event tá»« template, Ä‘á»«ng táº¡o handler method hÃ£y dÃ¹ng <code class="language-text">Subject</code> Ä‘á»ƒ thá»ƒ hiá»ƒn má»™t stream cÃ¡c event cáº§n handle vÃ  subscribe vÃ o subject Ä‘Ã³.</li>
<li>Chuyá»ƒn táº¥t cáº£ <code class="language-text">@Input</code> vá» dáº¡ng <code class="language-text">Observable</code>.</li>
</ul>
<p>Äá»ƒ Ä‘Æ¡n giáº£n thÃ¬ mÃ¬nh hÃ£y xem qua vÃ­ dá»¥ nÃ y nhÃ©.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript">@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">'app-counter'</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;div>{{ $count | async }}&lt;div>
    &lt;button (click)="upBtnClick$.next()">UP&lt;/button>
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CounterComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span><span class="token punctuation">,</span> OnDestroy <span class="token punctuation">{</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">get</span> <span class="token function">startValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_startValue$<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">startValue</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_startValue$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  count$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span>
  upBtnClick$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> _startValue$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _step$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BehaviorSubject</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">private</span> _unsubscribe$ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token function-variable function">_initData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_startValue$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
      <span class="token function">switchMap</span><span class="token punctuation">(</span><span class="token parameter">startValue</span> <span class="token operator">=></span> <span class="token function">interval</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
        <span class="token function">withLatest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_step$<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>value<span class="token punctuation">,</span> step<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> value <span class="token operator">*</span> step <span class="token operator">+</span> startValue<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function-variable function">_initEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_upBtnClickEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_initEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_unsubscribe$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_unsubscribe$<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token function-variable function">_upBtnClickEffect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>upBtnClick$<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>
    <span class="token function">withLatestFrom</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_step$<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">tap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">,</span> step<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>_step$<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>step <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">takeUntil</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_unsubscribe$<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Component Counter trong vÃ­ dá»¥ trÃªn sáº½ hiá»‡n má»™t sá»‘ tÄƒng liÃªn tá»¥c tá»« <code class="language-text">startValue</code> Ä‘Æ°á»£c truyá»n tá»« input, má»—i láº§n <code class="language-text">startValue</code> thay Ä‘á»•i nÃ³ sáº½ Ä‘áº¿m láº¡i tá»« giÃ¡ trá»‹ <code class="language-text">startValue</code> má»›i Ä‘Ã³. Náº¿u click vÃ o nÃºt <code class="language-text">UP</code> thÃ¬ giÃ¡ trá»‹ Ä‘áº¿m tÄƒng lÃªn má»—i giÃ¢y sáº½ thÃªm 1. Báº¡n cÃ³ thá»ƒ tháº¥y ráº±ng táº¥t cáº£ má»i thá»© mÃ¬nh sá»­ dá»¥ng Ä‘á»u lÃ  <code class="language-text">Observable</code>:</p>
<ul>
<li><code class="language-text">input starValue</code> Ä‘Ã£ bá»‹ Ä‘á»•i thÃ nh <code class="language-text">_startValue$</code> báº±ng getter vÃ  setter.</li>
<li>GiÃ¡ trá»‹ Ä‘áº¿m hiá»ƒn thá»‹ trÃªn UI vÃ  logic Ä‘á»ƒ tÄƒng giÃ¡ trá»‹ Ä‘Ã³ lÃªn sau má»—i giÃ¢y sáº½ Ä‘Æ°á»£c thá»ƒ hiá»‡n qua <code class="language-text">count$</code>.</li>
<li>Xá»­ lÃ½ event click cÅ©ng Ä‘Æ°á»£c thá»±c hiá»‡n thÃ´ng qua <code class="language-text">upBtnClick</code>.</li>
<li>DÃ¹ng <code class="language-text">_step$</code> Ä‘á»ƒ lÆ°u láº¡i state.</li>
<li>Logic update láº¡i state má»—i khi click cÅ©ng lÃ  má»™t observable vÃ  Ä‘Æ°á»£c táº¡o ra tá»« <code class="language-text">_upBtnClickEffect()</code>.</li>
</ul>
<p>ÄÆ¡n giáº£n tháº¿ thÃ´i, háº§u nhÆ° má»i thá»© Ä‘á»u cÃ³ thá»ƒ Ä‘Æ°á»£c xá»­ lÃ½ dÆ°á»›i dáº¡ng <code class="language-text">Observable</code>, lÃºc Ä‘Ã³ chÃºng ta cÃ³ thá»ƒ táº­n dá»¥ng sá»©c máº¡nh mÃ  <code class="language-text">Observable</code> mang láº¡i Ä‘á»ƒ thá»±c hiá»‡n nhá»¯ng logic vÃ´ cÃ¹ng phá»©c táº¡p nhÆ°ng code theo phong cÃ¡ch declarative ráº¥t dá»… hiá»ƒu.</p>
<p>NÃ³i dÃ´ng dÃ i thÃ¬ <code class="language-text">Angular First Class Observable</code>, vÃ­ dá»¥ trÃªn cÃ³ láº½ lÃ  Ä‘á»§ Ä‘á»ƒ cÃ¡c báº¡n cÃ³ Ä‘Æ°á»£c Ã½ tÆ°á»Ÿng Ä‘á»ƒ chuyá»ƒn má»i thá»© trong má»™t component thÃ nh <code class="language-text">Observable</code>. Tuy nhiÃªn cháº¯c nhiá»u báº¡n sáº½ tháº¥y ráº±ng quÃ¡ nhiá»u boilerplate code. ChÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng <code class="language-text">decorator</code> cáº£i thiá»‡n viá»‡c nÃ y.</p>
<h4>ObservableBinding Decorator</h4>
<p>Trong vÃ­ dá»¥ thÃ¬ <code class="language-text">Input</code> nÃ o cÃ¡c báº¡n cÅ©ng cÃ³ thá»ƒ dÃ¹ng cÃ¡ch nÃ y Ä‘á»ƒ thá»±c hiá»‡n chuyá»ƒn thÃ nh observable. Váº­y Ä‘á»ƒ Ä‘á»¡ pháº£i code láº·p Ä‘i láº·p láº¡i thÃ¬ hÃ£y táº¡o má»™t decorator cho viá»‡c nÃ y.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{</span> ReplaySubject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> ObservableBinding<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token operator">=</span> <span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span>map<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token builtin">symbol</span> <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> subjectSymbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token operator">:</span> object<span class="token punctuation">,</span> key<span class="token operator">:</span> PropertyKey</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">definedProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> <span class="token constant">T</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token operator">&lt;</span><span class="token constant">K</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token builtin">symbol</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>map <span class="token operator">?</span> <span class="token function">map</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">:</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReplaySubject</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token builtin">symbol</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>subjectSymbol<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">asObservable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token builtin">symbol</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Sau Ä‘Ã³ thay vÃ¬ Ä‘á»‘ng get, set trÃªn thÃ¬ chá»‰ cáº§n</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript">@<span class="token function">ObservableBinding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
@<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span> url$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span><span class="token punctuation">;</span>

@<span class="token function">ObservableBiding</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token operator">:</span> <span class="token builtin">number</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
@<span class="token function">Input</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span> count$<span class="token operator">:</span> Observable<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span><span class="token punctuation">;</span></code></pre></div>
<p>CÆ¡ báº£n Ã½ tÆ°á»Ÿng chá»‰ cÃ³ váº­y, náº¿u báº¡n thÃ­ch <code class="language-text">rxjs</code> nhÆ° mÃ¬nh vÃ  thÃ­ch dÃ¹ng nÃ³ nhiá»u nháº¥t cÃ³ thá»ƒ thÃ¬ Ä‘Ã¢y lÃ  má»™t hÆ°á»›ng Ä‘i mÃ  báº¡n cÃ³ thá»ƒ cÃ¢n nháº¯c. Náº¿u <code class="language-text">rxjs</code> lÃ  lÃ½ do báº¡n code Angular nhÆ° mÃ¬nh thÃ¬ cÃ²n chá» gÃ¬ ná»¯a mÃ  khÃ´ng lÃªn github cho <code class="language-text">rxjs</code> má»™t star sáºµn tiá»‡n unstar Angular luÃ´n ğŸ˜¬</p>
<h4>Hy vá»ng báº¡n tháº¥y bÃ i viáº¿t nÃ y bá»• Ã­ch ğŸ’•</h4></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/vi/first-class-observable-angular";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-f7307a6ac13ec036d92e.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-0e7509a3429803f7697c.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-377f0500fd9be3c1a84c.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-da91de74ceb71c240a8a.js"]};/*]]>*/</script><script src="/blog/component---src-templates-blog-post-tsx-da91de74ceb71c240a8a.js" async=""></script><script src="/blog/022d3153bf09c36cd784dcdb36ffbd187f9c96d7-56414ee62f29fb42ac66.js" async=""></script><script src="/blog/app-f7307a6ac13ec036d92e.js" async=""></script><script src="/blog/styles-1211262dd08146354a2f.js" async=""></script><script src="/blog/framework-d9cf0f47b747b267fae2.js" async=""></script><script src="/blog/webpack-runtime-d6f6abd63bb113a94911.js" async=""></script></body></html>